/*
  Quota – Elastic skin CSS
  Light/Dark theming via CSS variables.
  Scope: Elastic only.
*/

/* Use the standard Elastic icon slot */
.listing.iconized li.quota > a:before {
  content: "\f200";
}

/* -------------------------------------
   Base variables (Light)
   ------------------------------------- */
:root {
  /* Chart theming – read by canvas theme helper */
  --quota-used-color: #742d1d;
  --quota-free-color: #fbe4d7;
  --quota-grid-color: #c7c7c7;
  --quota-bg-color: transparent;
  --quota-text-color: #000000;

  /* UI accents for badges/chips */
  --quota-chip-bg: #f5efe9;
  --quota-chip-fg: #5a2a1a;
}

/* -------------------------------------
   Dark mode (OS preference)
   ------------------------------------- */
@media (prefers-color-scheme: dark) {
  :root {
    --quota-used-color: #ff8a65;   /* brighter on dark */
    --quota-free-color: #fbd1bf;
    --quota-grid-color: #4b4b4b;
    --quota-bg-color: transparent;
    --quota-text-color: #ffffff;

    --quota-chip-bg: #3a2a25;
    --quota-chip-fg: #ffd9cc;
  }
}

/* -------------------------------------
   Dark mode (explicit toggles)
   Add .theme-dark to <html> or <body>,
   or set data-theme="dark"
   ------------------------------------- */
html.theme-dark,
body.theme-dark,
html[data-theme="dark"],
body[data-theme="dark"] {
  --quota-used-color: #ff8a65;
  --quota-free-color: #fbd1bf;
  --quota-grid-color: #4b4b4b;
  --quota-bg-color: transparent;
  --quota-text-color: #ffffff;

  --quota-chip-bg: #3a2a25;
  --quota-chip-fg: #ffd9cc;
}

/* -------------------------------------
   Elastic-scoped UI styling
   (No variable re-definitions here)
   ------------------------------------- */
body.skin-elastic #settings-sections a.quota,
body.skin-elastic #settings-sections li.quota > a,
body.skin-elastic a.listitem.quota,
body.skin-elastic li.quota > a {
  background-image: url('./images/quota.svg') !important;
  background-repeat: no-repeat !important;
  background-position: 8px center !important;
  background-size: 18px 18px !important;
  padding-left: 36px; /* keep text clear of icon */
}

body.skin-elastic #settings-sections a.quota.selected,
body.skin-elastic #settings-sections li.quota.selected > a,
body.skin-elastic a.listitem.quota.selected,
body.skin-elastic a.listitem.quota:focus,
body.skin-elastic a.listitem.quota:hover,
body.skin-elastic li.quota > a.selected {
  background-image: url('./images/quota_act.svg') !important;
}

/* Chart container + legend colors pull from variables */
body.skin-elastic .quota-chart {
  background: var(--quota-bg-color);
  color: var(--quota-text-color);
  min-height: 180px;
}

body.skin-elastic .quota-legend,
body.skin-elastic .quota-label {
  color: var(--quota-text-color);
}

/* Optional: dark-specific icon swap
html.theme-dark body.skin-elastic #settings-sections a.quota,
body.theme-dark.skin-elastic #settings-sections a.quota,
html[data-theme="dark"] body.skin-elastic #settings-sections a.quota {
  background-image: url('./images/quota_dark.svg') !important;
}
html.theme-dark body.skin-elastic #settings-sections a.quota.selected,
body.theme-dark.skin-elastic #settings-sections a.quota.selected,
html[data-theme="dark"] body.skin-elastic #settings-sections a.quota.selected {
  background-image: url('./images/quota_act_dark.svg') !important;
}
*/

/* Chips/badges */
body.skin-elastic .quota-chip {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: .25rem .5rem;
  border-radius: 999px;
  background: var(--quota-chip-bg);
  color: var(--quota-chip-fg);
  font-weight: 600;
  line-height: 1.2;
}
body.skin-elastic .quota-chip .dot {
  width: .6rem;
  height: .6rem;
  border-radius: 50%;
  background: currentColor;
}

body.skin-elastic .quota-chip.used { color: var(--quota-used-color); }
body.skin-elastic .quota-chip.free { color: var(--quota-free-color); }
